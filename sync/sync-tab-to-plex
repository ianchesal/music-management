#!/bin/bash

# Legacy wrapper for TAB sync - maintains backward compatibility
# New usage: Use 'music-sync tab' instead

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
LIB_DIR="${SCRIPT_DIR}/lib"

# Source the sync library
source "${LIB_DIR}/sync-lib.sh"

# Convert legacy arguments to new format
args=("tab")
while getopts "n" opt; do
  case $opt in
  n) args=("-n" "${args[@]}") ;;
  *)
    echo "Usage: $0 [-n]" >&2
    exit 1
    ;;
  esac
done

# Execute the sync using the new architecture
perform_sync "${args[@]}"
